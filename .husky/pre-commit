#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸ—ï¸ Preparing your code for commit...'
echo ''

# Auto-format code
echo 'ğŸ“ Running auto-format...'
bun format
echo 'âœ… Format complete!'
echo ''

# Check Prettier standards
echo 'ğŸ¨ Checking code formatting...'
bun format:check ||
(
    echo ''
    echo 'âŒ Formatting check failed!'
    echo 'ğŸ“ Please run "bun format" to fix styling issues, then try again.'
    echo ''
    exit 1
)
echo 'âœ… Formatting check passed!'
echo ''

# Check ESLint Standards
echo 'ğŸ” Running linter...'
bun lint ||
(
    echo ''
    echo 'âŒ Linting check failed!'
    echo 'ğŸ”§ Please fix the issues listed above and try committing again.'
    echo ''
    exit 1
)
echo 'âœ… Linting passed!'
echo ''

# Stage formatted files
git add .

# If everything passes... Now we can commit
echo 'âœ¨ All checks passed! Committing your changes... âœ¨'
echo ''
